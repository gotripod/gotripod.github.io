<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>The Go Tripod Blog</title>
        <meta name="viewport" content="width=device-width">

       <!-- CSS (Stylesheets)
        ================================================== -->
    
        <link rel="stylesheet" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/font-awesome.css">
        
        <!-- Google Web Fonts
        ================================================== -->
        
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Oswald">
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Cabin">
        
        <!-- Favicons
        ================================================== -->
       
        

    </head>
    <body>

        <div class="site">
          <div class="header">
            <nav id="header-navigation" class="sixteen columns" role="navigation">
            
              <ul id="navigation">
                  <li><a href="index.html#header-global" title="Home">Home</a></li>
                  <li><a href="index.html#introduction" title="About Us">About Us</a></li>
                  <li><a href="index.html#latest-work" title="Our Work">Our Work</a></li>
                  <li><a href="index.html#services" title="Our Services">Our Services</a></li>
                  <li><a href="index.html#meet-the-team" title="Meet the Team">Meet the team</a></li>
                <li><a href="#" title="Blog">Blog</a></li>
                  <li><a href="index.html#contact" title="Contact Us">Contact Us</a></li>
              </ul>
              
              <select name="dropdown" size="1" onChange="scrollTo(this.value)">
                  <option value="" selected="selected">Navigation</option>
                  <option value="index.html#header-global">Home</option>
                  <option value="index.html#introduction">About Us</option>
                  <option value="index.html#latest-work">Our Work</option> 
                  <option value="index.html#services">Our Services</option> 
                  <option value="index.html#meet-the-team">Meet the team</option>
                  <option value="#">Blog</option>
                  <option value="index.html#contact">Contact Us</option>
              </select>
              
			</nav><!-- end #header-navigation -->
          </div>
		
        <section id="blog">
          <div class="container" style="margin-bottom:30px;">
			
				<div class="icon-holder intro" style="margin:0 auto;">
					<i class="icon-book" style="color:#e47c14 !important;"></i>
				</div>
			
          <h2>Building a medium to large scale Flex App using Cairngorm (Part 1)</h2>
<p class="meta">06 Jun 2008</p>

<div class="post">
<p>This is the first part of a four part series on my own approach to using Cairngorm to build an enterprise Rich Internet App.</p>

<p>In the first part, I cover setting up your project and creating the foundation classes that will hand our Rich Internet Application together.<br />
<a id="more"></a><a id="more-358"></a></p>

<h2>Getting Started</h2>

<p>Before we start although I am using Flex 3 and building a Flex app, this method works for Flex 2 and also Adobe Air applications.</p>

<p>Cairngorm is a Model View Controller framework and the first thing I like to do after creating a new Flex project is to create the appropriate folders in my project namespace. so for example, under uk/co/clockobj/projectname, I would create three folders named model, view and controller. Note: you don't have to namespace or use this folder structure I use, but this is what I like to do by convention.</p>

<p>The controller folder will store my controller (Cairngorm's Front Controller), my commands, my service locator, services and custom events.</p>

<p>The model folder will store my model locator, models and my Value Objects / Data Transfer Objects, in the screenshot above I have created a product subfolder to hold product related model classes.</p>

<p>Finally the view folder will store all our mxml.</p>

<p><img src="http://www.gotripod.com/wp-content/uploads/2008/06/cairngorm_layout.png" alt="" title="cairngorm_layout" width="402" height="492" class="aligncenter size-full wp-image-106" /></p>

<p>Note: I have an additional folder shown above called presentation. This is entirely optional but if you use a Presentation methodology, you can mimicking the folder structure of the view folder and store your Presentation modifier classes here.</p>

<p>Note: For now the presentation layer is beyond the scope of this article but I hope to post an article on this soon.</p>

<p>Next, you will want to <a href="http://labs.adobe.com/wiki/index.php/Cairngorm">download the Cairngorm.swc file from here</a>. (If you are new to Cairngorm <a href="http://www.adobe.com/devnet/flex/articles/cairngorm_pt1.html">do read Steven Websters articles</a>, they are a little outdated but explain the rationale and thinking behind cairngorm). Once downloaded, put the cairngorm.swc file in your libs folder.</p>

<p>With the Cairngorm.swc in our libs folder we have access to the Cairngorm classes. I also really recommend looking at the source code for Cairngorm (separate download from the link above).</p>

<h2>Setting up Cairngorm</h2>

<p>First thing we can setup is our controller. This is done by extending Cairngorm's front controller class. Cairngorm's front controller is very similar to the controller class created in my <a href="http://www.gotripod.com/2008/01/21/scaling-up-easymvc-as-your-flex-application-grows-part-1/">scaling up EasyMVC articles</a> except Cairngorm uses it's own EventDispatcher. Rather than listening to native events, it listens to CairngormEvents dispatched by it's custom event handler.</p>

<p>We create an initialiseCommands function which is called from the constructor and this function will be where we will register our command classes as event listeners for cairngorm events. (<a href="http://www.gotripod.com/2008/06/10/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-3/">more on that in part 3</a>)</p>

<p>Your controller class should look a little like this, I have called mine AppController:</p>

<pre lang="actionscript">package uk.co.clockobj.cairngormdemo.controller
{
    import com.adobe.cairngorm.control.FrontController;

    public class AppController extends FrontController
    {
        public function AppController()
        {
            super();
            initialiseCommands();
        }

        private function initialiseCommands() : void
        {
            // We will register our commands as event handlers here.
        }
    }
}</pre>

<p>Next, I will create a Model Locator and Service Locator using the known locator pattern which yes, uses Singletons but as Steven Webster so rightly puts it:<br />
<a href="http://www.adobe.com/devnet/flex/articles/cairngorm_pt2_06.html">"The singleton nature of the Model Locator pattern ensures that you don't suffer from duplicate state on the client, gives a large development team a consistent place to expose and share application-level state as instances of value objects, while ensuring that developers leverage the powerful data-binding capabilities of Flex to ensure that the view is notified when the model has changed."</a></p>

<h2>Model Locator</h2>

<p>I create my model locator named ModelLocator, however you will get a class name clash as there is a deprecated class in Cairngorm called ModelLocator (This just means when ever you add it to a class in Flex Builder you will be asked which one to use, which may annoy you).</p>

<pre lang="actionscript">package uk.co.clockobj.cairngormdemo.model
{
    import com.adobe.cairngorm.model.IModelLocator;

    [Bindable]
    public class ModelLocator implements IModelLocator
    {
        private static var _instance:ModelLocator;

        public static function getInstance():ModelLocator {
            if (_instance == null) {
                _instance = new ModelLocator();
            }
            return _instance;
        }

        public function ModelLocator()
        {
            if ( _instance != null )
            {
                throw( new Error( "Singleton class has already been instantiated" ) );
            }   else
            {
                // Instantiate services here
            }
        }

    }
}</pre>

<p>Note: Although I implement Cairngorm's IModelLocator interface above, it does not actually enforce any methods or properties.</p>

<p>In Steven Webster's guide to Cairngorm, he stores the DTOs/VO as static properties of the model locator. I take a slightly different approach and I like to have models which are accessible through, and instantiated when the ModelLocator is first created, I will discuss this later (<a href="http://www.gotripod.com/2008/06/08/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-2/">in part 2</a>)</p>

<h2>Service Locator</h2>

<p>I am also going to deviate slightly from the Cairngorm documented approach for Service Locators and implement a slightly less enforced version. Cairngorm uses an IServiceLocator interface which enforces the use of simple factory methods to access your services. You may need this so have a <a href="http://www.cairngormdocs.org/">look at the documentation</a>, but I going to keep my Service Locator consistent with my Model Locator.</p>

<p>So in the controller folder create a new ActionScript Class called ServiceLocator.as as follows:</p>

<pre lang="actionscript">package uk.co.clockobj.cairngormdemo.controller
{
    public class ServiceLocator
    {
        private static var _instance:ServiceLocator;

        public static function getInstance():ServiceLocator {
            if (_instance == null) {
                _instance = new ServiceLocator();
            }
            return _instance;
        }

        public function ServiceLocator()
        {
            if ( instance != null )
            {
                throw( new Error( "Singleton class has already been instantiated" ) );
            } else
            {
                // Instantiate services here
            }
        }

    }
}</pre>

<p>For now we are not going to create any web services, <a href="http://www.gotripod.com/2008/06/10/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-3/">we will do this in part 3</a>.</p>

<p><a href="http://www.gotripod.com/2008/06/08/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-2/">In the next part of this series</a> I will go into detail about how I implement models, discuss the advantages and disadvantages of accessing your DTOs directly and propose a different solution and show how we can bind our currentState view state property directly to the model.</p>

<h2>Contents:</h2>

<p>Part 1 - Setting up a project for Cairngorm<br />
<a href="http://www.gotripod.com/2008/06/08/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-2/">Part 2 - The Model</a><br />
<a href="http://www.gotripod.com/2008/06/10/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-3/">Part 3 - Commands</a><br />
<a href="http://www.gotripod.com/2008/06/10/building-a-medium-to-large-scale-flex-app-using-cairngorm-part-4/">Part 4 - Services</a><br />
<a href="http://www.gotripod.com/wp-content/uploads/2008/06/cairngormdemo.zip">Cairngorm Demo Source Files</a></p>

</div>

			
          </div>
          </section>
			
          <footer id="footer-global" role="contentinfo" class="clearfix">
	
		<section id="contact">
		
			<div class="container">
			
				<div class="row">
		
					<div class="sixteen columns">
					
						<div class="icon-holder contact">
							<i class="icon-envelope"></i>
						</div>
						
						<h1>Got a great idea? Lets talk.</h1>
						
						<p>Please get in touch with us, we promise we won't bite!</p>
					
						<address id="contact-details">
						
							<p><a href="mailto:hello@gotripod.com?Subject=Ok, don't bite me! But I would like to talk about ...">hello@gotripod.com</a> // <a href="tel:08454752487">0845 475 2487</a><br />
							Tremough Innovation Centre, Penryn Campus
							<br>
							 Penryn, Cornwall, UK, TR10 9TA</p>
						
						</address>
                        
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d40886.830442687766!2d-5.127996999999958!3d50.17185400000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x486b16307846c97b%3A0x6b783d3b216b6f4d!2sGo+Tripod+Ltd!5e0!3m2!1sen!2s!4v1398110943195" width="100%" height="300" frameborder="0" style="border:0"></iframe>
                    
					</div>		
					
				</div><!-- end .row -->
			
				<div class="row">
				
					<div class="sixteen columns">
					
						<ul class="social-icons footer">
						
							<li><a href="http://www.twitter.com/gotripod" target="_blank" title="go Tripod on Twitter"><img src="assets/img/social-icons/twitter_icon_small.png" width="32" height="32" alt="" /></a></li>
							<li><a href="http://www.facebook.com/gotripod" target="_blank" title="go Tripod on Facebook"><img src="assets/img/social-icons/facebook_icon_small.png" width="32" height="32" alt="" /></a></li>
							<li><a href="http://www.linkedin.com/company/go-tripod-ltd" target="_blank" title="Go Tripod on LinkedIn"><img src="assets/img/social-icons/linkedin_icon_small.png" width="32" height="32" alt="" /></a></li>
							<li><a href="https://plus.google.com/u/0/b/101897321380998049253/101897321380998049253/posts" target="_blank" title="go Tripod on Google +"><img src="assets/img/social-icons/google_plus_icon_small.png" width="32" height="32" alt="" /></a></li>
							
						</ul>
						
					</div>
					
				</div><!-- end .row -->
		
				<div class="row">
		
					<div class="sixteen columns">
				  	  
			  			<p id="copyright-details">&copy; 2014	 Go Tripod.<br>Registered in the UK company number 6912029 VAT No. 972 5228 06</p>
             		
			  		</div>
			  		
			  	</div><!-- end .row -->	  
		  	
			</div><!-- end .container -->
		
		</section><!-- end #contact -->
		
	</footer><!-- end #footer-global -->

    </body>
</html>
